# Rust

## Prompt 1

Please write me a small windows service in rust that will watch another windows service and in case the latter is deactivated for more than 30 seconds will restart it.

### Result

Here's a small windows service in Rust that watches another windows service and restarts it if it is deactivated for more than 30 seconds:

```rust
use winapi::{
    error::{self, ENOENT},
    event_token::EventToken,
    file_info::FileInfo,
    handle::{self, HANDLE},
    io::{self, InheritHandle},
    path::Path,
    ptr::null_mut,
    sync::{self, Mutex},
    time::Duration,
    winapi::{
        api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
        error::{self, ENOEXEC},
        event_base::EventBase,
        event_token::EventToken,
        file::File,
        handle::{self, HANDLE},
        io::{self, InheritHandle},
        path::Path,
        ptr::null_mut,
        sync::{self, Mutex},
        time::Duration,
        winapi::{
            api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
            error::{self, ENOEXEC},
            event_base::EventBase,
            event_token::EventToken,
            file::File,
            handle::{self, HANDLE},
            io::{self, InheritHandle},
            path::Path,
            ptr::null_mut,
            sync::{self, Mutex},
            time::Duration,
            winapi::{
                api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                error::{self, ENOEXEC},
                event_base::EventBase,
                event_token::EventToken,
                file::File,
                handle::{self, HANDLE},
                io::{self, InheritHandle},
                path::Path,
                ptr::null_mut,
                sync::{self, Mutex},
                time::Duration,
                winapi::{
                    api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                    error::{self, ENOEXEC},
                    event_base::EventBase,
                    event_token::EventToken,
                    file::File,
                    handle::{self, HANDLE},
                    io::{self, InheritHandle},
                    path::Path,
                    ptr::null_mut,
                    sync::{self, Mutex},
                    time::Duration,
                    winapi::{
                        api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                        error::{self, ENOEXEC},
                        event_base::EventBase,
                        event_token::EventToken,
                        file::File,
                        handle::{self, HANDLE},
                        io::{self, InheritHandle},
                        path::Path,
                        ptr::null_mut,
                        sync::{self, Mutex},
                        time::Duration,
                        winapi::{
                            api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                            error::{self, ENOEXEC},
                            event_base::EventBase,
                            event_token::EventToken,
                            file::File,
                            handle::{self, HANDLE},
                            io::{self, InheritHandle},
                            path::Path,
                            ptr::null_mut,
                            sync::{self, Mutex},
                            time::Duration,
                            winapi::{
                                api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                error::{self, ENOEXEC},
                                event_base::EventBase,
                                event_token::EventToken,
                                file::File,
                                handle::{self, HANDLE},
                                io::{self, InheritHandle},
                                path::Path,
                                ptr::null_mut,
                                sync::{self, Mutex},
                                time::Duration,
                                winapi::{
                                    api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                    error::{self, ENOEXEC},
                                    event_base::EventBase,
                                    event_token::EventToken,
                                    file::File,
                                    handle::{self, HANDLE},
                                    io::{self, InheritHandle},
                                    path::Path,
                                    ptr::null_mut,
                                    sync::{self, Mutex},
                                    time::Duration,
                                    winapi::{
                                        api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                        error::{self, ENOEXEC},
                                        event_base::EventBase,
                                        event_token::EventToken,
                                        file::File,
                                        handle::{self, HANDLE},
                                        io::{self, InheritHandle},
                                        path::Path,
                                        ptr::null_mut,
                                        sync::{self, Mutex},
                                        time::Duration,
                                        winapi::{
                                            api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                            error::{self, ENOEXEC},
                                            event_base::EventBase,
                                            event_token::EventToken,
                                            file::File,
                                            handle::{self, HANDLE},
                                            io::{self, InheritHandle},
                                            path::Path,
                                            ptr::null_mut,
                                            sync::{self, Mutex},
                                            time::Duration,
                                            winapi::{
                                                api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                                error::{self, ENOEXEC},
                                                event_base::EventBase,
                                                event_token::EventToken,
                                                file::File,
                                                handle::{self, HANDLE},
                                                io::{self, InheritHandle},
                                                path::Path,
                                                ptr::null_mut,
                                                sync::{self, Mutex},
                                                time::Duration,
                                                winapi::{
                                                    api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                                    error::{self, ENOEXEC},
                                                    event_base::EventBase,
                                                    event_token::EventToken,
                                                    file::File,
                                                    handle::{self, HANDLE},
                                                    io::{self, InheritHandle},
                                                    path::Path,
                                                    ptr::null_mut,
                                                    sync::{self, Mutex},
                                                    time::Duration,
                                                    winapi::{
                                                        api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                                        error::{self, ENOEXEC},
                                                        event_base::EventBase,
                                                        event_token::EventToken,
                                                        file::File,
                                                        handle::{self, HANDLE},
                                                        io::{self, InheritHandle},
                                                        path::Path,
                                                        ptr::null_mut,
                                                        sync::{self, Mutex},
                                                        time::Duration,
                                                        winapi::{
                                                            api::{self, SERVICE_CONTROL_CORE, SERVICE_CONTROL_INTERFACE},
                                                            error::{self, ENOEXEC},
                                                            event_base::EventBase,
                                                            event_token::EventToken,
                                                            file::File,
                                                            handle::{self, HANDLE},
                                                            io::{self, InheritHandle},
                                                            path::Path,
```
